---
title: "Stroop Task Summary"
author: "Janey Matejka, Rebecca Lee, Kayleah Tsai"
date: "2022-10-06"
output: html_document
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r message=FALSE, warning=FALSE, include=FALSE}
rm(list = ls(all.names = TRUE))      # remove objects in R
# set the paths for project, script, and data dirs
this_rmd_path <- rstudioapi::getActiveDocumentContext()$path
proj_dir <- gsub("GCDS.*.Rmd", "GCDS", this_rmd_path)
proj_name = ""
library(magrittr)
library(dplyr)
r_dir    <- paste(proj_dir, "r", sep = "/")          # r subdir
data_dir <- paste(proj_dir, "data", sep = "/")       # data subdir
#source("https://pastebin.com/raw/b63hB7Hj")         # get all externals
#source("https://pastebin.com/raw/8mXH02yg")   # run and comment out after knitting
source("https://pastebin.com/raw/97NNTTzu")   # run to include in function definitions 
```

```{r}
library(readr)
library(dplyr)
```

```{r}
stroopdat <- read_csv("gcds_stroop_project_data.csv")
stroopdat <- select(stroopdat, -valence)
stroopdat <- select(stroopdat, -(wf_kf:domin_sd))
stroopdat <- select_if(-(id == 0))

view(stroopdat)
```

```{r}
stroopdat <- stroopdat %>%
  mutate(., key_color =
           case_when(
             resp == 'd' ~ 'blue',
             resp == 'f' ~ 'green', 
             resp == 'j' ~ 'orange',
             resp == 'k' ~ 'yellow'
           )) %>%
  mutate(., accurate =
           case_when(
             font == key_color ~ 'YES', 
             font != key_color ~ 'NO'
           )) %>%
  mutate(., congruency = 
           case_when(
           font == word ~ 'CONGRUENT', 
           font != word ~ 'INCONGRUENT'))

view(stroopdat)
```

```{r}
write_csv(stroopdat, 'gcds_stroop_10_06_accuracy.csv')
```

```{r}
stroopdat <- stroopdat %>%
  filter(., block == 'stroop')
```

```{r}
view(stroopdat <- stroopdat %>%
  group_by(id, accurate) %>%
  summarise(n = n()) %>%
  mutate(AccRat = n/sum(n)))
```

```{r}
view(stroopdat <- stroopdat %>% 
       group_by(id, congruency)%>%
       mutate(stroopAcc = AccRat - lag(AccRat)))
```

```{r}
view(stroopdat <- stroopdat %>%
       group_by(accurate)%>%
       mutate(avgAcc = mean(AccRat)))

```


```{r}
view(stroopdat <- stroopdat %>%
  group_by(id) %>%
  mutate(., rtMean = mean(rt), rtLatency = rt - rtMean)%>% 
  filter(., accurate == "YES")) 
```

```{r}
view(stroopdat <- stroopdat %>% 
       mutate(stroopAcc = rt - lag(AccRat)))

```


